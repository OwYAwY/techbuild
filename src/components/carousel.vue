<script setup lang="ts">
import { ref } from 'vue'

const items = [
  {
    image: '/photos/pk1.jpg',
    grade: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê',
    review:
      '–ú–∞—Å—Ç–µ—Ä –æ—á–µ–Ω—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ —á–µ—Å—Ç–Ω—ã–π, –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º –ø–æ–µ—Ö–∞–ª–∏ –∑–∞ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–º–∏, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–æ–±—Ä–∞–ª –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ. –°–±–æ—Ä–∫–∞ –≤—ã—à–ª–∞ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–π, –∫—Ä–∞—Å–∏–≤–æ–π, –∫–∞–±–µ–ª—å –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ. –°–æ–≤–µ—Ç—É—é, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é. üòä',
    author: '–î–∞–Ω—è –ö.',
    authorAvatar:
      'https://sun9-58.userapi.com/s/v1/ig2/CpX8TY74HW5AW5nwdgcMhwGaxQWn9oUPVbqi74bDdtfMRWgXvTfhdzlFZt_euSPgJeUht053qyjBt9kM1zzNmwiD.jpg?quality=95&as=32x32,48x48,72x72,108x108,160x160,240x240,360x360,480x480,540x540,640x640,720x720,1080x1080,1280x1280,1440x1440,2560x2560&from=bu&cs=2560x0',
    authorHref: 'https://vk.com/ervix',
  },
  {
    image: '/photos/pk2.jpg',
    grade: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê',
    review:
      '–°–æ–±—Ä–∞–ª–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä, –∑–∞ –ø–∞—Ä—É –¥–Ω–µ–π –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –∏ —Å–æ–±—Ä–∞–ª–∏ –Ω—É–∂–Ω—ã–µ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ. –ö–æ–º–ø—å—é—Ç–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–Ω–æ, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –Ω–∏–∑–∫–∏–µ, –≤—Å–µ —Å—É–ø–µ—Ä, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é!!! üëçüëçüëç',
    author: 'Xyashi R.',
    authorAvatar:
      'https://sun9-46.userapi.com/s/v1/ig2/DTDEaAM424qcJVjtWWUysiUuMJ9q-00s-4Q955s7P-hk0doK1SgQkRit5yomctf1uBrWPUeFUN7yhzNralgCROzI.jpg?quality=95&as=32x32,48x48,72x72,108x108,160x160,240x240,360x360,480x480,540x540,640x640,720x720,1024x1024&from=bu&cs=1024x0',
    authorHref: 'https://vk.com/id_kotayra',
  },
  {
    image: '/photos/pk3.jpg',
    grade: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê',
    review:
      '–û—Å—Ç–∞–ª—Å—è –æ—á–µ–Ω—å –¥–æ–≤–æ–ª–µ–Ω! –û–Ω –±—ã–ª –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –æ—Ç–∑—ã–≤—á–∏–≤—ã–º –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º. –°–±–æ—Ä—â–∏–∫ —É—á–µ–ª –≤—Å–µ –º–æ–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏, –∞ —Ç–∞–∫–∂–µ –¥–∞–ª –ø–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –†–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ–º, –∫—Ç–æ –∏—â–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—É—é —Å–±–æ—Ä–∫—É –ü–ö –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ä–æ–∫–∏!',
    author: '–ö–∏—Ä–∏–ª–ª –í.',
    authorAvatar:
      'https://sun9-35.userapi.com/s/v1/ig1/pYV2_jkLmUflnaYkTtYP0GDApCivFrJub1spXTUlODZ7l-RUSVvg_BFDX1UtD2Pe95SaA56f.jpg?quality=96&as=32x32,48x48,72x72,108x108,160x160,240x240,360x360,480x480,540x540,640x640,720x720,900x900&from=bu&cs=900x0',
    authorHref: 'https://vk.com/gardex3',
  },
  {
    image: '/photos/pk4.smIRZvZCnhTUQM0rM5ADb8p0BHRbhvQAtKA89dCG6us',
    grade: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê',
    review:
      '–†–∞–±–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ –æ—Ç–ª–∏—á–Ω–æ, —Å–æ–±—Ä–∞–ª –ø–∫ –±—ã—Å—Ç—Ä–æ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ. –°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ —Å–±–æ—Ä–∫—É –±–æ–ª–µ–µ —á–µ–º –∞–¥–µ–∫–≤–∞—Ç–Ω–∞—è.',
    author: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
    authorAvatar: '/photos/userpng.png',
  },
  {
    image: '/photos/pk5.7ZmgMwksIJuADUfIJNUDAo_AxIprXaLk-yT2rmrvEOM',
    grade: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê',
    review: '–°–¥–µ–ª–∞–Ω–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ+—É—Å—Ç—Ä–∞–Ω–∏–ª –ø—Ä–æ–±–ª–µ–º—ã –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–∞—Å—Ç–µ—Ä–∞. –°–ø–∞—Å–∏–±–æ!',
    author: '–°–µ—Ä–≥–µ–π',
    authorAvatar: '/photos/sergeypng.png',
  },
  {
    image: '/photos/pk6.HU_isI3-zsI76HTgjoerU3t3Uoss26oFgAFNEDVfI4s',
    grade: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê',
    review:
      '–ü—Ä–∏—è—Ç–Ω—ã–π –º–æ–ª–æ–¥–æ–π —á–µ–ª–æ–≤–µ–∫. –ë—ã—Å—Ç—Ä–æ –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –æ –≤—Å—Ç—Ä–µ—á–µ. –ú–∞—Å—Ç–µ—Ä –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –≤—ã–ø–æ–ª–Ω–∏–ª —Å–≤–æ—é —Ä–∞–±–æ—Ç—É. –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –í–ê–£ ü§©. –ü–æ–¥–æ–±—Ä–∞–ª –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ –ø–æ–¥ –º–æ–π –±—é–¥–∂–µ—Ç, –∫–∞–±–µ–ª–∏ –≤—Å–µ –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–æ –º–Ω–µ —É–ª–æ–∂–∏–ª. –û—Å—Ç–∞–ª–∞—Å—å –¥–æ–≤–æ–ª—å–Ω–∞. –°–Ω–∞—á–∞–ª–∞ –Ω–µ–º–Ω–æ–≥–æ —Å–æ–º–Ω–µ–≤–∞–ª–∞—Å—å, —Ç.–∫ –º–∞–ª–æ –æ—Ç–∑—ã–≤–æ–≤, –Ω–æ –Ω–µ –ø–æ–∂–∞–ª–µ–ª–∞. –í—Å–µ–º —Å–æ–≤–µ—Ç—É—éüëç',
    author: '–õ–∏–ª–∏—è –ö.',
    authorAvatar:
      'https://sun9-17.userapi.com/s/v1/ig2/df_-M1Pet0U3tuQ7VyCyFVs8vavoOcxxvxZk2-79i6-d8Hmufnu-lhkel08N17tpFsO8i8umRfFpDn1CsIRTjLD3.jpg?quality=95&as=32x43,48x64,72x96,108x144,160x213,240x320,360x480,480x640,540x720,640x854,720x960,794x1059&from=bu&cs=794x0',
    authorHref: 'https://vk.com/l_karalkina',
  },
  {
    image: '/photos/pk7.cNDX7krmrff9pr25NRwF1KKL6phC3w24FJ9ZqC4pqlY',
    grade: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê',
    review:
      '–ú–∞—Å—Ç–µ—Ä –æ—á–µ–Ω—å –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∏ —á–µ—Å—Ç–Ω—ã–π, –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º –ø–æ–µ—Ö–∞–ª–∏ –∑–∞ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–º–∏, –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–æ–±—Ä–∞–ª –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ. –°–±–æ—Ä–∫–∞ –≤—ã—à–ª–∞ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–π, –∫—Ä–∞—Å–∏–≤–æ–π, –∫–∞–±–µ–ª—å –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ. –°–æ–≤–µ—Ç—É—é, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é. üòä',
    author: '–î–∞–Ω–∏–∏–ª',
    authorAvatar:
      'https://10.img.avito.st/image/1/1.s5fYPLa1CX7unp19sjrPje2eHX5ml5197p4dfA.c7oPdsCxvYfQj94MBULc487MJRpaGFJRslR_rFyuqLQ',
  },
]

const currentIndex = ref(0)

function next() {
  currentIndex.value = (currentIndex.value + 1) % items.length
}

function prev() {
  currentIndex.value = (currentIndex.value - 1 + items.length) % items.length
}
</script>

<template>
  <section class="w-full bg-gray-100 py-20" id="portfolio">
    <h2 class="text-4xl font-bold text-center mb-10">–ù–∞—à–∏ —Å–±–æ—Ä–∫–∏ –∏ –æ—Ç–∑—ã–≤—ã</h2>

    <div class="relative max-w-5xl mx-auto overflow-visible px-4">
      <div class="overflow-hidden">
        <div
          class="flex gap-6 transition-transform duration-700 ease-in-out"
          :style="{ transform: `translateX(calc(-${currentIndex} * (80% + 1.5rem) + 10%))` }"
        >
          <div
            v-for="(item, index) in items"
            :key="index"
            class="w-[80%] flex-shrink-0 bg-white rounded-xl shadow-lg flex transition-all duration-500"
            :style="{
              filter: index === currentIndex ? 'none' : 'blur(3px)',
              transform: index === currentIndex ? 'scale(1)' : 'scale(0.9)',
              height: '350px',
            }"
          >
            <img
              :src="item.image"
              alt="Example build"
              class="rounded-l-xl object-cover w-1/2 h-full"
            />
            <div class="flex flex-col justify-center w-1/2 p-6">
              <blockquote class="italic text-gray-700 text-lg">"{{ item.review }}"</blockquote>
              <div
                class="mt-6 flex justify-between items-center text-gray-900 font-semibold text-lg"
              >
                <p class="text-yellow-500">{{ item.grade }}</p>
                <div class="flex items-center space-x-3">
                  <p>‚Äî {{ item.author }}</p>
                  <a :href="item.authorHref" target="_blank">
                    <img
                      :src="item.authorAvatar"
                      alt="avatar"
                      class="w-10 h-10 rounded-full object-cover"
                    />
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- –°—Ç—Ä–µ–ª–∫–∏ -->
      <button
        @click="prev"
        class="absolute left-2 top-1/2 transform -translate-y-1/2 p-2 flex items-center justify-center transition-transform duration-300 hover:scale-110 hover:text-white text-gray-400 z-10"
        aria-label="Prev"
        style="background: transparent; border: none"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-10 w-10"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
        </svg>
      </button>

      <button
        @click="next"
        class="absolute right-2 top-1/2 transform -translate-y-1/2 p-2 flex items-center justify-center transition-transform duration-300 hover:scale-110 hover:text-white text-gray-400 z-10"
        aria-label="Next"
        style="background: transparent; border: none"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-10 w-10"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
        >
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
        </svg>
      </button>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="flex justify-center mt-6 space-x-2">
      <span
        v-for="(item, index) in items"
        :key="'dot-' + index"
        class="w-3 h-3 rounded-full cursor-pointer transition-transform"
        :class="{
          'bg-gray-800 scale-110': index === currentIndex,
          'bg-gray-400': index !== currentIndex,
        }"
        @click="currentIndex = index"
      ></span>
    </div>
  </section>
</template>
